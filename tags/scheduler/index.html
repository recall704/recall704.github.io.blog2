<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />

  
  <title>
  Tag → scheduler
  
   | recall&#39;s blog
</title>

  
  





  
  <meta name="author" content="recall704" />
  <meta name="description" content="" />

  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@gohugoio" />
  <meta name="twitter:title" content="recall&#39;s blog" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:image" content="http://www.recall704.com/img/avatar.jpg" />

  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="recall&#39;s blog" />
  <meta property="og:description" content="" />
  <meta property="og:url" content="http://www.recall704.com/tags/scheduler/" />
  <meta property="og:image" content="http://www.recall704.com/img/avatar.jpg" />




<meta name="generator" content="Hugo 0.54.0" />


<link rel="canonical" href="http://www.recall704.com/tags/scheduler/" />
<link rel="alternate" type="application/rss+xml" href="http://www.recall704.com/tags/scheduler/index.xml" title="Recall's blog" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />







<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="Recall&#39;s blog" />
<meta name="msapplication-tooltip" content="Recall&#39;s blog" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="http://www.recall704.com/img/bio.jpg" />
<link rel="icon" type="image/png" sizes="16x16" href="http://www.recall704.com/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="http://www.recall704.com/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="http://www.recall704.com/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="http://www.recall704.com/img/touch-icon-apple.png" />
<link rel="mask-icon" href="http://www.recall704.com/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="http://www.recall704.com/css/bundle.6271cf88a8.css" />


  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="http://www.recall704.com/img/bio.jpg" alt="Avatar">
  
  <h2 class="title">Recall&#39;s blog</h2>
  
  <p class="subtitle">学无先后，达者为师</p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/">Home</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/tags/">Tags</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/categories/">Categories</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/series/">series</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/links/">友情链接</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/about/">初恋</a>
          </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      
      <li class="social-item">
        <a href="mailto:tk657309822@gmail.com" title="Email"><span class="icon icon-email"></span></a>
      </li>

      
      <li class="social-item">
        <a href="//github.com/recall704" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="http://www.recall704.com/img/vx.png" title="Wechat"><span class="icon icon-wechat"></span></a>
      </li>

      

      

      

      

      <li class="social-item">
        <a rel="alternate" type="application/rss+xml" href="http://www.recall704.com/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-list">
    <header class="list-header offscreen">
      <h2 class="list-label">Posts List</h2>
    </header>
    
    
      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="http://www.recall704.com/cloud/k8s/scheduler/pod-match-node-selector/" class="post-link">k8s 调度算法分析之 MatchNodeSelector（四）</a></h3>
    <p class="post-meta">@recall704 · Sep 24, 2018 · 2 min read</p>
  </header>
  
  <p class="post-summary">一、概述 之前的文章有简要分析 k8s 的调度过程，主要就是
1. 节点筛选（选取可用的节点）
2. 节点排序（选取最优节点）
今天我们来详细分析其中的一个筛选算法 MatchNodeSelector
二、代码分析 MatchNodeSelector 对应的函数为 PodMatchNodeSelector
// PodMatchNodeSelector checks if a pod node selector matches the node label. func PodMatchNodeSelector(pod *v1.Pod, meta algorithm.PredicateMetadata, nodeInfo *schedulercache.NodeInfo) (bool, []algorithm.PredicateFailureReason, error) { node := nodeInfo.Node() if node == nil { return false, nil, fmt.Errorf(&#34;node not found&#34;) } if podMatchesNodeLabels(pod, node) { return true, nil, nil } return false, []algorithm.PredicateFailureReason{ErrNodeSelectorNotMatch}, nil } 这个函数看起来超级简单，但内部其实分为两个部分的。
1. selector</p>
  <footer class="post-footer">
    <a class="read-more" href="http://www.recall704.com/cloud/k8s/scheduler/pod-match-node-selector/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="http://www.recall704.com/cloud/k8s/scheduler/pod-fits-host-ports/" class="post-link">k8s 调度算法分析之 PodFitsHostPorts（三）</a></h3>
    <p class="post-meta">@recall704 · Sep 24, 2018 · 2 min read</p>
  </header>
  
  <p class="post-summary">一、概述 之前的文章有简要分析 k8s 的调度过程，主要就是
1. 节点筛选（选取可用的节点）
2. 节点排序（选取最优节点）
今天我们来详细分析其中的一个筛选算法 PodFitsHostPorts
二、代码分析 // PodFitsHostPorts checks if a node has free ports for the requested pod ports. func PodFitsHostPorts(pod *v1.Pod, meta algorithm.PredicateMetadata, nodeInfo *schedulercache.NodeInfo) (bool, []algorithm.PredicateFailureReason, error) { var wantPorts map[string]bool if predicateMeta, ok := meta.(*predicateMetadata); ok { wantPorts = predicateMeta.podPorts } else { // We couldn&#39;t parse metadata - fallback to computing it. 	wantPorts = schedutil.GetUsedPorts(pod) } if len(wantPorts) == 0 { return true, nil, nil } existingPorts := nodeInfo.</p>
  <footer class="post-footer">
    <a class="read-more" href="http://www.recall704.com/cloud/k8s/scheduler/pod-fits-host-ports/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="http://www.recall704.com/cloud/k8s/scheduler/pod-fits-resource/" class="post-link">k8s 调度算法分析之 PodFitsResources（二）</a></h3>
    <p class="post-meta">@recall704 · Sep 22, 2018 · 3 min read</p>
  </header>
  
  <p class="post-summary">一、概述 之前的文章有简要分析 k8s 的调度过程，主要就是
1. 节点筛选（选取可用的节点）
2. 节点排序（选取最优节点）
今天我们来详细分析其中的一个筛选算法 PodFitsResources
二、代码分析 只贴代码是没有任何意义的，我们来逐行分析
// PodFitsResources checks if a node has sufficient resources, such as cpu, memory, gpu, opaque int resources etc to run a pod. // First return value indicates whether a node has sufficient resources to run a pod while the second return value indicates the // predicate failure reasons if the node has insufficient resources to run the pod.</p>
  <footer class="post-footer">
    <a class="read-more" href="http://www.recall704.com/cloud/k8s/scheduler/pod-fits-resource/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="http://www.recall704.com/cloud/k8s/scheduler/k8s-scheduler/" class="post-link">k8s pod 调度分析（零）</a></h3>
    <p class="post-meta">@recall704 · Aug 14, 2018 · 2 min read</p>
  </header>
  
  <p class="post-summary">一、k8s 基础架构 在分析 k8s pod 调度之前，我们先来回顾一下 k8s 的架构
二、k8s pod 调度相关的参数 当用户通过 kubectl 或者 api 创建了一个 deployment 或者 其它 workload 的时候， k8s 会创建对应的 pod 信息，pod 信息最终会传递给 kubelet，实例化成具体的 docker 容器， 那么 k8s 是根据什么条件，怎么把 pod “安排”到 node 上去的呢？ 有哪些因数会影响 pod 的调度呢？
我找了一下 pod 的参数，大概会有以下几个参数影响 pod 的调度
1. NodeName 2. NodeSelector 3. Affinity 4. Tolerations 5. PriorityClassName 6. Priority 1. nodeName 一旦你在 pod 里指定了 nodeName ,那么 pod 一定会调度到该节点上, 其实 pod 已经跳过了调度过程了
2. Priority pod 是可以有优先级的，这个优先级是相对于其它 pod 的，也就是说，如果 pod 的优先级高于其它 pod，这个 pod 会被优先调度。</p>
  <footer class="post-footer">
    <a class="read-more" href="http://www.recall704.com/cloud/k8s/scheduler/k8s-scheduler/">Read More →</a>
  </footer>
</article>

      
    
    
  </section>
  <footer class="site-footer">
  <p>© 2017-2020 Recall&#39;s blog</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="http://www.recall704.com/js/bundle.fb61ec41f8.js"></script>




  </body>
</html>
