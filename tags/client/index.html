<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />

  
  <title>
  Tag → client
  
   | recall&#39;s blog
</title>

  
  





  
  <meta name="author" content="recall704" />
  <meta name="description" content="" />

  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@gohugoio" />
  <meta name="twitter:title" content="recall&#39;s blog" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:image" content="http://www.recall704.com/img/avatar.jpg" />

  
  <meta property="og:type" content="website" />
  <meta property="og:title" content="recall&#39;s blog" />
  <meta property="og:description" content="" />
  <meta property="og:url" content="http://www.recall704.com/tags/client/" />
  <meta property="og:image" content="http://www.recall704.com/img/avatar.jpg" />




<meta name="generator" content="Hugo 0.54.0" />


<link rel="canonical" href="http://www.recall704.com/tags/client/" />
<link rel="alternate" type="application/rss+xml" href="http://www.recall704.com/tags/client/index.xml" title="Recall's blog" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />







<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="Recall&#39;s blog" />
<meta name="msapplication-tooltip" content="Recall&#39;s blog" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="http://www.recall704.com/img/bio.jpg" />
<link rel="icon" type="image/png" sizes="16x16" href="http://www.recall704.com/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="http://www.recall704.com/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="http://www.recall704.com/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="http://www.recall704.com/img/touch-icon-apple.png" />
<link rel="mask-icon" href="http://www.recall704.com/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="http://www.recall704.com/css/bundle.6271cf88a8.css" />


  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="http://www.recall704.com/img/bio.jpg" alt="Avatar">
  
  <h2 class="title">Recall&#39;s blog</h2>
  
  <p class="subtitle">学无先后，达者为师</p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/">Home</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/tags/">Tags</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/categories/">Categories</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/series/">series</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/links/">友情链接</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="http://www.recall704.com/about/">初恋</a>
          </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      
      <li class="social-item">
        <a href="mailto:tk657309822@gmail.com" title="Email"><span class="icon icon-email"></span></a>
      </li>

      
      <li class="social-item">
        <a href="//github.com/recall704" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="http://www.recall704.com/img/vx.png" title="Wechat"><span class="icon icon-wechat"></span></a>
      </li>

      

      

      

      

      <li class="social-item">
        <a rel="alternate" type="application/rss+xml" href="http://www.recall704.com/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-list">
    <header class="list-header offscreen">
      <h2 class="list-label">Posts List</h2>
    </header>
    
    
      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="http://www.recall704.com/cloud/k8s-authentication-with-basic/" class="post-link">创建 client （三）： HTTP Basic Auth 访问 k8s API Server</a></h3>
    <p class="post-meta">@recall704 · Apr 15, 2018 · 2 min read</p>
  </header>
  
  <p class="post-summary">0x01 结构体 AuthInfo 如果你留意过上一篇文章，你会发现一个结构体
AuthInfo: clientcmdapi.AuthInfo{ ClientCertificate: &#34;client.crt&#34;, ClientKey: &#34;client.key&#34;, },  其对应代码在 client-go 下的 k8s.io/client-go/tools/clientcmd/api 中
type AuthInfo struct { // LocationOfOrigin indicates where this object came from. It is used for round tripping config post-merge, but never serialized. 	LocationOfOrigin string // ClientCertificate is the path to a client cert file for TLS. 	// &#43;optional 	ClientCertificate string `json:&#34;client-certificate,omitempty&#34;` // ClientCertificateData contains PEM-encoded data from a client cert file for TLS.</p>
  <footer class="post-footer">
    <a class="read-more" href="http://www.recall704.com/cloud/k8s-authentication-with-basic/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="http://www.recall704.com/cloud/k8s-authentication-with-ca/" class="post-link">创建 client （二）： 通过配置文件方式访问 k8s API</a></h3>
    <p class="post-meta">@recall704 · Apr 15, 2018 · 2 min read</p>
  </header>
  
  <p class="post-summary">0x01 概述 前面我讲过集群内通过 ServiceAccount 生成 token 的方式访问 k8s API Server， 那么如果我们要访问 k8s api 的应用不是跑在 k8s 之内，而是在 k8s 集群之外运行呢？
这个时候，我们还有两种认证方式
 ca 证书认证
 basic 认证  0x02 kubectl 是如何访问 k8s 的？ k8s 部署的时候，我们会给 kubectl 配置证书，context 等信息，生成一个 $HOME/.kube/config 这样的文件，文件内容如下 apiVersion: v1 clusters: - cluster: certificate-authority-data: ... server: https://192.168.1.200:6443 name: kube_cluster contexts: - context: cluster: kube_cluster namespace: kube-system user: kubectl name: kubectl@kube_cluster current-context: kubectl@kube_cluster kind: Config preferences: {} users: - name: kubectl user: as-user-extra: {} client-certificate-data: .</p>
  <footer class="post-footer">
    <a class="read-more" href="http://www.recall704.com/cloud/k8s-authentication-with-ca/">Read More →</a>
  </footer>
</article>

      
        <article class="post-entry">
  <header class="post-header">
    <h3 class="post-title"><a href="http://www.recall704.com/cloud/k8s-authentication-with-token/" class="post-link">创建 client （一）： token 方式访问 k8s API</a></h3>
    <p class="post-meta">@recall704 · Apr 11, 2018 · 2 min read</p>
  </header>
  
  <p class="post-summary">0x1 概述 k8s 提供了三种认证方式访问 API Server，分别是：
1. ca 认证 k8s 的各个组件，比如 kubelet, kube-proxy 和 API Server 进行通信的时候，一般都是使用证书的形式，配置在 kubeconfig 文件中。
2. token 认证 rook （https://github.com/rook/rook） 、dashboard （https://github.com/kubernetes/dashboard） 这些应用，跑在 k8s 集群内，而且需要访问 k8s 的资源， 运行的时候需要指定 ServiceAccount ，ServiceAccount 又配置了指定的角色和权限。
3. http basic 认证 使用用户名和密码访问 k8s，稍后会有新的文章详细介绍。
0x2 token 认证详解 像 rook、dashboard 这样的应用，它是怎样通过 ServiceAccount 和 k8s API Server 进行通信的呢？
和 k8s API Server 通信需要创建 client， 而创建 client 需要对应的 配置信息（包含了 API Server 的地址和端口，以及认证信息）
我们在 rook 的代码中，可以看到下面这样类似的代码</p>
  <footer class="post-footer">
    <a class="read-more" href="http://www.recall704.com/cloud/k8s-authentication-with-token/">Read More →</a>
  </footer>
</article>

      
    
    
  </section>
  <footer class="site-footer">
  <p>© 2017-2020 Recall&#39;s blog</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="http://www.recall704.com/js/bundle.fb61ec41f8.js"></script>




  </body>
</html>
